//add to head
{% if template == 'index' %}
	{{ 'seamless_carousel.scss' | asset_url | stylesheet_tag }}
{% endif %}

//add before generic wrapper
{% if template == 'index' %}
  {% include 'slider' %}
{% endif %}

//add before body end
{% if template == 'index' %}
  {{ 'jquery.seamless_carousel.js' | asset_url | script_tag }}
  <script type="text/javascript">
    // Get Set, let's go 
    $(document).ready(function () {
    	if ($('#home_feature_images a').length > 0) {
    		var paginatedata = $('#home_feature_images').data("showpagination");
    	  	//console.log ('paginate data : '+paginatedata)
    	  	// Adjust Markup
    	  	var home_slides = '';
    	  	var showPagination = paginatedata; //true or false; /* Truth is a Relative Concept :) */
    	  	if (showPagination) {
    	    	var home_pagination = '';
    	    	var home_mobile_pagination = '';
    	  	}
             
       		$('#home_feature_images a').each(function (index) {
          		//set the text box vars
          		var headline = $(this).data("headline");
          		if (headline) {
          			var headline2 = '<div class="framed">'+$(this).data("headline")+'</div>';
          		} 
          		else {
          			var headline2 = '';
          		}
                var lead = $(this).data("lead");
                var prompt = $(this).data("prompt");
                if (prompt) {
	                var prompt2 = '<span class="leftspanned inthelink">&lt; </span>'+$(this).data("prompt")+'<span class="rightspanned inthelink"> &gt;</span>';
                } 
                else {
                	var prompt2 = '';
                }
                var alignment = $(this).data("alignment");
                var boxstyle = $(this).data("style");
                var showtextbox = $(this).data("showformobile");
                var showfordesktop = $(this).data("showfordesktop");
                var src = $(this).find('img').attr("src");
                //check for repeating
                var repetition = $(this).data("repeat");
                var smallscreen_deploy = $(this).data("smallscreen");
                if (smallscreen_deploy) {
                  var smallscreenclass='largealternative';
                  var divsmallscreenclass='smallenablediv';
                  var additionalimage = '';
                  additionalimage +='<img class="mobilescreen" src="' + smallscreen_deploy + '" alt="' + $(this).find('img').attr("alt") + '" />';
                } else {
                  var smallscreenclass='smalldisabled';
                  var divsmallscreenclass='smalldisablediv';
                  var additionalimage = '';
                }
                if (showtextbox) {
                  var showformobile='hideformobile';
                } else {
                  var showformobile='centerformobile';
                }
                if (showfordesktop) {
                  var showfordsktp='hideoverlay';
                } else {
                  var showfordsktp='';
                }
	            var bgcolor = $(this).attr("data-bgcolor");
	            if (src === undefined) {
                  src = $(this).find('img').data("src");
                }
                // Conditional logic, distinguishing between index number and background color for each slide, repeat data is always reported
                // CASE 1:  For First Index, and with a bg color Defined
                if (bgcolor.length != 0) {
                  home_slides += '<div><div><a class="'+divsmallscreenclass+'" data-bgcolor="' + bgcolor + '" data-smallscreen="'+ smallscreen_deploy +'" data-repeat="' + repetition + '" href="' + $(this).attr("href") + '"><div class="textoverlay '+alignment+' '+showfordsktp+' '+showformobile+' '+boxstyle+'"><div class="encircle"><div class="tightwidth">' + headline2 + '<div class="unframed">'+lead+'</div><div class="linkprompt">'+prompt2+'</div></div></div></div><img class="swapper '+smallscreenclass+'" src="' + src + '" alt="' + $(this).find('img').attr("alt") + '" />'+additionalimage+'</a></div></div>';
                // console.log('index : 0 CASE 1- bgcolor defined : ' + bgcolor + '. Repetition Value : ' + repetition);
                } 
                else {
                  //CASE 2:  For First Index, and with a bg color UNdefined
                  home_slides += '<div><div><a class="'+divsmallscreenclass+'" data-smallscreen="'+ smallscreen_deploy +'" data-repeat="' + repetition + '" href="' + $(this).attr("href") + '"><div class="textoverlay '+alignment+' '+showfordsktp+' '+showformobile+' '+boxstyle+'"><div class="encircle"><div class="tightwidth">' + headline2 + '<div class="unframed">'+lead+'</div><div class="linkprompt">'+prompt2+'</div></div></div></div><img class="swapper '+smallscreenclass+'" src="' + src + '" alt="' + $(this).find('img').attr("alt") + '" />'+additionalimage+'</a></div></div>';
                  //console.log('index : 0. CASE 2- bgcolor defined : NULL. Repetition Value : ' + repetition);
                }
                if (showPagination) {
                  home_pagination += '<li><a>' + $(this).find('img').attr("alt") + '</a><span>/</span></li>';
                  home_mobile_pagination += '<li><a>&bull;</a></li>';
                }
            });
            $('#home_feature_images').remove();
            $( "#home_feature" ).fadeTo( "fast" , 1, function() {
            	// Animation complete.
            	console.log('#home_feature is now visible');
            });
              
            if (showPagination) {
            	$('#home_feature').prepend('<div id="home-carousel" class="carousel"><div class="slides">' + home_slides + '</div><div class="paginationwrap"><ul class="menu"><li class="prev"><a></a></li><li class="next"><a></a></li></ul><ul class="pagination">' + home_pagination + '</ul><ul class="mobile-pagination">' + home_mobile_pagination + '</ul></div></div>');
            }
            if (!showPagination) {
            	$('#home_feature').prepend('<div id="home-carousel" class="carousel"><div class="slides">' + home_slides + '</div></div>');
            }
            // Initiate carousel
            $('#home-carousel').carousel({
            	layout: 'home'
            });
        }
    });
	</script>
 {% endif %}